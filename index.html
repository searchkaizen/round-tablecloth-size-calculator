<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Round Tablecloth Size Calculator</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #fff;
      color: #333;
      padding: 2em;
      line-height: 1.6;
    }
    .calculator-container {
      max-width: 500px;
      margin: 0 auto;
      padding: 2em;
      border: 1px solid #ddd;
      border-radius: 6px;
      background-color: #fafafa; /* Main background for the calculator */
      text-align: center; /* Added to center inline-block children like the title-card */
    }

    /* Updated styles for the title card */
    .title-card {
      display: inline-block; /* Makes the card wrap its content */
      background-color: #000; /* Black background */
      padding: 0.5em 0.9em; /* Adjusted padding */
      border-radius: 6px;
      margin-bottom: 2em;
    }

    .title-card h2 {
      font-size: 24px;
      font-weight: bold;
      color: #fff;
      margin: 0;
      white-space: nowrap; /* Prevents the title from wrapping */
    }


    label {
      display: block;
      margin-top: 1em;
      font-weight: bold;
      margin-bottom: 0.5em;
      text-align: left; /* Ensure labels remain left-aligned */
    }

    /* Common styles for form elements */
    input, select, button {
      width: 100%;
      padding: 10px;
      margin-top: 0.25em;
      border: 1px solid #ccc;
      border-radius: 4px;
      font-size: 16px;
      box-sizing: border-box;
      /* text-align: left; Removed from here */
    }

    /* Specific text alignment for inputs and selects */
    input, select {
      text-align: left; /* Ensure text in inputs and selects is left aligned */
    }
    
    input[type="number"] { 
        text-align: left; /* Explicitly for number inputs if needed */
    }
    .input-error {
      border-color: #e74c3c;
    }

    .drop-style-options-container {
      display: flex;
      justify-content: space-between;
      gap: 8px;
      margin-top: 0.25em;
    }
    .drop-style-option {
      flex: 1;
      padding: 10px 5px;
      border: 1px solid #ccc;
      border-radius: 4px;
      text-align: center;
      cursor: pointer;
      font-size: 13px;
      background-color: #fff;
      transition: background-color 0.2s ease, border-color 0.2s ease, color 0.2s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      min-height: 40px;
    }
    .drop-style-option:hover {
      background-color: #e9e9e9;
      border-color: #bbb;
    }
    .drop-style-option.active {
      background-color: #f1b241;
      color: #000;
      border-color: #d9982e;
      font-weight: bold;
    }

    button#calculateBtn {
      background-color: #f1b241;
      color: #000;
      font-weight: bold;
      border: none; /* Overrides general button border if any */
      cursor: pointer;
      margin-top: 1.5em; /* Specific margin for this button */
      transition: background-color 0.3s ease;
      /* Text will center by default */
    }
    button#calculateBtn:hover {
      background-color: #d9982e;
    }
    .result-box {
      margin-top: 1.5em;
      text-align: center; 
      background-color: #f0f0f0;
      padding: 1.5em;
      border-radius: 6px;
      box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1);
      opacity: 0;
      transform: translateY(10px);
      transition: all 0.4s ease;
      display: flex;
      flex-direction: column;
      align-items: center; 
    }
    .result-box.show {
      opacity: 1;
      transform: translateY(0);
    }
    .result-box.error {
      background-color: #ffebee;
      color: #c0392b;
    }
    .result-box.error ul {
      list-style-type: none;
      padding-left: 0;
      margin-bottom: 0;
      text-align: left;
    }
    .result-box.error li {
      margin-bottom: 0.5em;
    }
    .result-title {
      font-size: 18px;
      font-weight: bold;
      margin-bottom: 0.5em;
    }
    .result-size {
      font-size: 72px; 
      font-weight: bold;
      margin: 0.2em 0;
      width: 160px; 
      height: 160px;
      border-radius: 50%;
      background-color: #f1b241;
      color: #000;
      display: flex;
      align-items: center;
      justify-content: center;
      line-height: 1;
    }
    .result-note {
      font-size: 14px;
      color: #555;
      margin-top: 0.5em;
    }
  </style>
</head>
<body>

  <div class="calculator-container">
    <div class="title-card">
      <h2>Round Tablecloth Size Calculator</h2>
      <img src="https://cdn.shopify.com/s/files/1/0250/3408/files/stretch-round-tablecloth-mvpvisuals.png?v=1748730151">
    </div>

    <label for="tableDiameter">Table Diameter (in inches):</label>
    <input type="number" id="tableDiameter" min="20" max="100" placeholder="e.g. 60">

    <label for="tableHeight">Table Height (in inches):</label>
    <input type="number" id="tableHeight" min="20" max="50" value="30" placeholder="e.g. 30">

    <label>Select Drop Style:</label>
    <div id="dropStyleOptionsContainer" class="drop-style-options-container">
      <div class="drop-style-option" data-value="8">Casual (8″)</div>
      <div class="drop-style-option" data-value="15">Formal (15″)</div>
      <div class="drop-style-option" data-value="dynamicFull">Full Drop</div>
      <div class="drop-style-option" data-value="custom">Custom</div>
    </div>

    <div id="customDropContainer" style="display: none;">
      <label for="customDrop">Custom Drop Length (in inches):</label>
      <input type="number" id="customDrop" min="1" max="50" placeholder="e.g. 12">
    </div>

    <button id="calculateBtn" onclick="calculateTableclothSize()">Calculate</button>

    <div id="result" class="result-box" aria-live="polite">
      </div>
  </div>

  <script>
    const tableDiameterInput = document.getElementById("tableDiameter");
    const tableHeightInput = document.getElementById("tableHeight");
    const customDropContainer = document.getElementById("customDropContainer");
    const customDropInput = document.getElementById("customDrop");
    const resultBox = document.getElementById("result");

    const dropStyleOptionElements = document.querySelectorAll(".drop-style-option");
    let selectedDropValue = "8"; // Default selected value (Casual 8")

    function initializeDropStyles() {
      dropStyleOptionElements.forEach(option => {
        if (option.dataset.value === selectedDropValue) {
          option.classList.add("active");
        }
        option.addEventListener("click", function() {
          dropStyleOptionElements.forEach(opt => opt.classList.remove("active"));
          this.classList.add("active");
          selectedDropValue = this.dataset.value;
          toggleCustomDrop(selectedDropValue);
        });
      });
      toggleCustomDrop(selectedDropValue); 
    }

    function toggleCustomDrop(value) {
      if (value === "custom") {
        customDropContainer.style.display = "block";
        customDropInput.focus();
      } else {
        customDropContainer.style.display = "none";
      }
    }

    function calculateTableclothSize() {
      [tableDiameterInput, tableHeightInput, customDropInput].forEach(input => {
        input.classList.remove("input-error");
      });
      resultBox.classList.remove("error", "show");
      resultBox.innerHTML = ""; // Clear previous results

      const diameterStr = tableDiameterInput.value;
      const heightStr = tableHeightInput.value;
      const dropType = selectedDropValue; 
      const customDropStr = customDropInput.value;

      let errors = [];

      const diameterMin = parseFloat(tableDiameterInput.min);
      const diameterMax = parseFloat(tableDiameterInput.max);
      let diameter;
      if (diameterStr === "") {
        errors.push("Table diameter is required.");
        tableDiameterInput.classList.add("input-error");
      } else {
        diameter = parseFloat(diameterStr);
        if (isNaN(diameter)) {
          errors.push("Table diameter must be a number.");
          tableDiameterInput.classList.add("input-error");
        } else if (diameter < diameterMin || diameter > diameterMax) {
          errors.push(`Table diameter must be between ${diameterMin}″ and ${diameterMax}″.`);
          tableDiameterInput.classList.add("input-error");
        }
      }

      const heightMin = parseFloat(tableHeightInput.min);
      const heightMax = parseFloat(tableHeightInput.max);
      let height;
      if (heightStr === "") {
        errors.push("Table height is required.");
        tableHeightInput.classList.add("input-error");
      } else {
        height = parseFloat(heightStr);
        if (isNaN(height)) {
          errors.push("Table height must be a number.");
          tableHeightInput.classList.add("input-error");
        } else if (height < heightMin || height > heightMax) {
          errors.push(`Table height must be between ${heightMin}″ and ${heightMax}″.`);
          tableHeightInput.classList.add("input-error");
        }
      }

      let drop;
      if (dropType === "custom") {
        const customDropMin = parseFloat(customDropInput.min);
        const customDropMax = parseFloat(customDropInput.max);
        if (customDropStr === "") {
          errors.push("Custom drop length is required when 'Custom' is selected.");
          customDropInput.classList.add("input-error");
        } else {
          drop = parseFloat(customDropStr);
          if (isNaN(drop)) {
            errors.push("Custom drop length must be a number.");
            customDropInput.classList.add("input-error");
          } else if (drop < customDropMin || drop > customDropMax) {
            errors.push(`Custom drop length must be between ${customDropMin}″ and ${customDropMax}″.`);
            customDropInput.classList.add("input-error");
          }
        }
      } else if (dropType === "dynamicFull") {
        if (!isNaN(height)) {
            drop = height;
        } else if (heightStr !== "") {
            if (!errors.some(e => e.includes("Table height"))) {
                 errors.push("Valid table height is needed for 'Full Drop'.");
            }
        }
      } else { 
        drop = parseFloat(dropType);
        if (isNaN(drop)) {
            errors.push("Invalid drop style selected."); 
        }
      }

      if (errors.length > 0) {
        resultBox.classList.add("error");
        let errorHTML = "<ul>";
        errors.forEach(err => {
          errorHTML += `<li>${err}</li>`;
        });
        errorHTML += "</ul>";
        resultBox.innerHTML = errorHTML;
        void resultBox.offsetWidth;
        resultBox.classList.add("show");
        resultBox.scrollIntoView({ behavior: 'smooth', block: 'nearest' }); // Added scroll
        return;
      }

      if (isNaN(diameter) || isNaN(drop) || isNaN(height)) {
        if (dropType === 'dynamicFull' && isNaN(height)) {
            // Error already handled
        } else {
            resultBox.classList.add("error");
            resultBox.innerHTML = "<p>Please ensure all inputs are valid for calculation.</p>";
            void resultBox.offsetWidth;
            resultBox.classList.add("show");
            resultBox.scrollIntoView({ behavior: 'smooth', block: 'nearest' }); // Added scroll
            return;
        }
      }

      const clothSize = diameter + (2 * drop);
      let note = "";

      if (drop > height + 1) {
        note = "Will puddle on the floor.";
      } else if (drop >= height -1 && drop <= height + 1) {
        note = "Reaches or is very near floor-length.";
      } else if (dropType === "dynamicFull" && !isNaN(height) && drop === height) {
         note = "Reaches the floor (full drop)."
      }

      resultBox.innerHTML = `
        <div class="result-title">Recommended Tablecloth Size</div>
        <div class="result-size">${clothSize}″</div>
        <div class="result-note">${note}</div>
      `;
      void resultBox.offsetWidth;
      resultBox.classList.add("show");
      resultBox.scrollIntoView({ behavior: 'smooth', block: 'nearest' }); // Added scroll
    }

    document.addEventListener('DOMContentLoaded', initializeDropStyles);
  </script>

</body>
</html>
